(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(76)},36:function(e,t,a){},56:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),o=a.n(c),i=a(9),l=(a(36),a(4)),s=a(5),u=a(7),m=a(6),d=a(8),p=a(13),h=a(2),g=a.n(h),f=(a(56),function(e){var t=r.a.createElement("ul",{className:"main-header__nav-items"},r.a.createElement("li",{className:"main-header__nav-item"},r.a.createElement("img",{className:"logo",src:"Logo.jpg",alt:"Logo"})),r.a.createElement("li",{className:"main-header__nav-item"},r.a.createElement(i.c,{to:"/products"},"Products")),r.a.createElement("li",{className:"main-header__nav-item"},r.a.createElement(i.c,{to:"/product/add"},"Add")),r.a.createElement("li",{className:"main-header__nav-item"},r.a.createElement("button",{onClick:e.onLogout},"Logout")));return e.authenticated||(t=r.a.createElement("ul",{className:"main-header__nav-items"},r.a.createElement("li",{className:"main-header__nav-item"},r.a.createElement("img",{className:"logo",src:"Logo.jpg",alt:"Logo"})),r.a.createElement("li",{className:"main-header__nav-item"},r.a.createElement(i.c,{to:"/auth"},"Authenticate")))),r.a.createElement("header",{className:"main-header"},r.a.createElement("nav",{className:"main-header__nav"},t))}),E=(a(65),function(e){return r.a.createElement("button",Object.assign({className:"button"},e),e.children)}),b=(a(66),function(e){return r.a.createElement("div",{className:"modal ".concat(e.open?"open":"")},r.a.createElement("header",{className:"modal__header"},r.a.createElement("h1",null,e.title)),r.a.createElement("section",{className:"modal__content"},e.children),r.a.createElement("section",{className:"modal__actions"},r.a.createElement(E,{type:"button",onClick:e.onClose},"Okay")))}),v=(a(67),function(e){return r.a.createElement("div",{className:e.show?"backdrop show":"backdrop"})}),y=(a(68),function(e){return r.a.createElement("article",{className:"product-item"},r.a.createElement("div",{className:"product-item__image",style:{backgroundImage:"url('"+e.imageUrl+"')"}}),r.a.createElement("div",{className:"product-item__content"},r.a.createElement("h1",null,e.title),r.a.createElement("h2",null,"$",e.price),r.a.createElement("p",null,e.text),r.a.createElement("div",{className:"product-item__controls"},r.a.createElement(i.b,{to:"/products/"+e.id},"Details"),r.a.createElement(i.b,{to:"/products/"+e.id+"/edit"},"Edit"),r.a.createElement("button",{onClick:e.onDelete.bind(void 0,e.id)},"Delete"))))}),_=(a(69),function(e){return r.a.createElement("section",{className:"products"},e.products.map(function(t){return r.a.createElement(y,{key:t._id,id:t._id,title:t.name,text:t.description,price:t.price,imageUrl:t.image,onDelete:e.onDeleteProduct})}))}),N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,products:[]},a.productDeleteHandler=function(e){g.a.delete("/products/"+e).then(function(e){a.fetchData()}).catch(function(e){a.props.onError("Deleting the product failed. Please try again later"),console.log(e)})},a.fetchData=function(){g.a.get("/products").then(function(e){a.setState({isLoading:!1,products:e.data})}).catch(function(e){a.setState({isLoading:!1,products:[]}),a.props.onError("Loading products failed. Please try again later"),console.log(e)})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=r.a.createElement("p",null,"Loading products...");return!this.state.isLoading&&this.state.products.length>0&&(e=r.a.createElement(_,{products:this.state.products,onDeleteProduct:this.productDeleteHandler})),this.state.isLoading||0!==this.state.products.length||(e=r.a.createElement("p",{className:"Error-msgs"},"No products found. Try again later.")),r.a.createElement("main",null,e)}}]),t}(n.Component),j=(a(70),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,product:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/products/"+this.props.match.params.id).then(function(t){e.setState({isLoading:!1,product:t.data})}).catch(function(t){e.setState({isLoading:!1}),console.log(t),e.props.onError("Loading the product failed. Please try again later")})}},{key:"render",value:function(){var e=r.a.createElement("p",{className:"Error-msgs"},"Is loading...");return!this.state.isLoading&&this.state.product&&(e=r.a.createElement("main",{className:"product-page"},r.a.createElement("h1",null,this.state.product.name),r.a.createElement("h2",null,"$",this.state.product.price),r.a.createElement("div",{className:"product-page__image",style:{backgroundImage:"url('"+this.state.product.image+"')"}}),r.a.createElement("p",null,this.state.product.description))),this.state.isLoading||this.state.product||(e=r.a.createElement("main",null,r.a.createElement("p",{className:"Error-msgs"},"No product found. Try again later."))),e}}]),t}(n.Component)),O=a(15),L=(a(71),function(e){var t=r.a.createElement("input",Object.assign({},e.config,{onChange:e.onChange}));return"textarea"===e.elType&&(t=r.a.createElement("textarea",Object.assign({},e.config,{onChange:e.onChange}))),r.a.createElement("div",{className:"input"},r.a.createElement("label",null,e.label),t)}),C=(a(72),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,title:"",price:"",imageUrl:"",description:""},a.editProductHandler=function(e){if(e.preventDefault(),""!==a.state.title.trim()&&""!==a.state.price.trim()&&""!==a.state.imageUrl.trim()&&""!==a.state.description.trim()){a.setState({isLoading:!0});var t={name:a.state.title,price:parseFloat(a.state.price),image:a.state.imageUrl,description:a.state.description};("edit"===a.props.match.params.mode?g.a.patch("/products/"+a.props.match.params.id,t):g.a.post("/products",t)).then(function(e){a.setState({isLoading:!1}),a.props.history.replace("/products")}).catch(function(e){a.setState({isLoading:!1}),console.log(e),a.props.onError("Editing or adding the product failed. Please try again later")})}},a.inputChangeHandler=function(e,t){a.setState(Object(O.a)({},t,e.target.value))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;"edit"===this.props.match.params.mode?g.a.get("/products/"+this.props.match.params.id).then(function(t){var a=t.data;e.setState({isLoading:!1,title:a.name,price:a.price.toString(),imageUrl:a.image,description:a.description})}).catch(function(t){e.setState({isLoading:!1}),console.log(t)}):this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this,t=r.a.createElement("form",{className:"edit-product__form",onSubmit:this.editProductHandler},r.a.createElement("h1",null,"Add a New Product"),r.a.createElement(L,{label:"Title",config:{type:"text",value:this.state.title},onChange:function(t){return e.inputChangeHandler(t,"title")}}),r.a.createElement(L,{label:"Price",config:{type:"number",value:this.state.price},onChange:function(t){return e.inputChangeHandler(t,"price")}}),r.a.createElement(L,{label:"Image URL",config:{type:"text",value:this.state.imageUrl},onChange:function(t){return e.inputChangeHandler(t,"imageUrl")}}),r.a.createElement(L,{label:"Description",elType:"textarea",config:{rows:"5",value:this.state.description},onChange:function(t){return e.inputChangeHandler(t,"description")}}),r.a.createElement(E,{type:"submit"},"add"===this.props.match.params.mode?"Create Product":"Update Product"));return this.state.isLoading&&(t=r.a.createElement("p",null,"Is loading...")),r.a.createElement("main",null,t)}}]),t}(n.Component)),k=(a(73),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.inputChangeHandler=function(e,t){a.setState(Object(O.a)({},t,e.target.value))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("main",{className:"auth-main"},r.a.createElement("form",{className:"auth__form",onSubmit:function(t){return e.props.onAuth(t,{email:e.state.email,password:e.state.password})}},r.a.createElement("h1",null,"Login for Admin"),r.a.createElement(L,{label:"E-Mail",config:{type:"email"},onChange:function(t){return e.inputChangeHandler(t,"email")}}),r.a.createElement(L,{label:"Password",config:{type:"password"},onChange:function(t){return e.inputChangeHandler(t,"password")}}),r.a.createElement(E,{type:"submit"},"Login")),r.a.createElement("section",{className:"Menu"},r.a.createElement(i.b,{to:"/Menu"},r.a.createElement(E,null,"See Menu"))))}}]),t}(n.Component)),w=(a(74),function(e){return r.a.createElement("article",{className:"product-item"},r.a.createElement("div",{className:"product-item__image",style:{backgroundImage:"url('"+e.imageUrl+"')"}}),r.a.createElement("div",{className:"product-item__content"},r.a.createElement("h1",null,e.title),r.a.createElement("h2",null,"$",e.price),r.a.createElement("p",null,e.text)))}),H=(a(75),function(e){return r.a.createElement("section",{className:"products"},e.products.map(function(e){return r.a.createElement(w,{key:e._id,id:e._id,title:e.name,text:e.description,price:e.price,imageUrl:e.image})}))}),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0,products:[]},a.fetchData=function(){g.a.get("/products").then(function(e){a.setState({isLoading:!1,products:e.data})}).catch(function(e){a.setState({isLoading:!1,products:[]}),a.props.onError("Loading products failed. Please try again later"),console.log(e)})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=r.a.createElement("p",null,"Loading products...");return!this.state.isLoading&&this.state.products.length>0&&(e=r.a.createElement(H,{products:this.state.products})),this.state.isLoading||0!==this.state.products.length||(e=r.a.createElement("p",{className:"Error-msgs"},"No products found. Try again later.")),r.a.createElement("main",null,e)}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isAuth:!1,authMode:"login",error:null},a.authHandler=function(e,t){e.preventDefault(),""!==t.email.trim()&&""!==t.password.trim()&&g.a.post("/login",t).then(function(e){if(201===e.status||200===e.status){var t=e.data.token;console.log(t),a.setState({isAuth:!0})}}).catch(function(e){a.errorHandler(e.response.data.message),console.log(e),a.setState({isAuth:!1})})},a.logoutHandler=function(){a.setState({isAuth:!1})},a.errorHandler=function(e){a.setState({error:e})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement(p.d,null,r.a.createElement(p.a,{from:"/",to:"/products",exact:!0}),r.a.createElement(p.a,{from:"/auth",to:"/products",exact:!0}),r.a.createElement(p.b,{path:"/product/:mode",render:function(t){return r.a.createElement(C,Object.assign({},t,{onError:e.errorHandler}))}}),r.a.createElement(p.b,{path:"/products/:id/:mode",render:function(t){return r.a.createElement(C,Object.assign({},t,{onError:e.errorHandler}))}}),r.a.createElement(p.b,{path:"/products/:id",render:function(t){return r.a.createElement(j,Object.assign({},t,{onError:e.errorHandler}))}}),r.a.createElement(p.b,{path:"/products",render:function(t){return r.a.createElement(N,Object.assign({},t,{onError:e.errorHandler}))}}));return this.state.isAuth||(t=r.a.createElement(p.d,null,r.a.createElement(p.a,{from:"/",to:"/Menu",exact:!0}),r.a.createElement(p.a,{from:"/",to:"/auth",exact:!0}),r.a.createElement(p.a,{from:"/products",to:"/auth"}),r.a.createElement(p.a,{from:"/product",to:"/auth"}),r.a.createElement(p.b,{path:"/auth",render:function(){return r.a.createElement(k,{mode:e.state.authMode,onAuth:e.authHandler})}}),r.a.createElement(p.b,{path:"/Menu",render:function(t){return r.a.createElement(S,Object.assign({},t,{onError:e.errorHandler}))}}))),r.a.createElement("div",{className:"App"},r.a.createElement(b,{open:!!this.state.error,title:"An Error Occurred",onClose:function(){return e.errorHandler(null)}},this.state.error),r.a.createElement(v,{show:!!this.state.error}),r.a.createElement(f,{authenticated:this.state.isAuth,onLogout:this.logoutHandler}),t)}}]),t}(n.Component);o.a.render(r.a.createElement(i.a,null," ",r.a.createElement(D,null)," "),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.d7cbf5b4.chunk.js.map